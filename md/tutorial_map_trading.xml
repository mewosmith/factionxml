<?xml version="1.0" encoding="utf-8"?>
<mdscript name="Tutorial_map_trading" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="md.xsd">
  <cues>
    <cue name="Start" namespace="this">
      <conditions>
        <event_cue_signalled cue="md.Setup.Start" />
      </conditions>
      <actions>
        <do_if value="not md.$TutorialRegister?">
          <set_value name="md.$TutorialRegister" exact="[]" />
        </do_if>
        <append_to_list name="md.$TutorialRegister" exact="Start" />
      </actions>
      <cues>
        <cue name="PlayerDied">
          <conditions>
            <event_object_destroyed object="player.entity" />
          </conditions>
          <actions>
            <cancel_cue cue="Start" />
          </actions>
        </cue>

        <cue name="Trigger" checkinterval="5s" version="2">
          <conditions>
            <check_value value="not md.$SurpressTutorials?" />
            <check_value value="player.computer" />
          </conditions>
          <actions>
            <set_value name="$DebugChance" exact="100"/>
            <set_value name="$MissionName" exact="'10) ' + readtext.{30191}.{1}" />
            <set_value name="$Guide" exact="player.computer" />
            <create_offer cue="Start" actor="$Guide" name="$MissionName" description="readtext.{30191}.{2}" difficulty="level.trivial" faction="faction.player" type="missiontype.tutorial">
              <briefing>
                <objective step="1" action="objective.custom" customaction="{30194,20}"/>
                <objective step="2" action="objective.custom" customaction="{30194,21}"/>
                <objective step="3" action="objective.custom" customaction="{30194,22}"/>
              </briefing>
            </create_offer>
          </actions>
          <patch sinceversion="2">
            <do_if value="Start.hasmissionoffer">
              <set_value name="$MissionName" exact="'10) ' + readtext.{30191}.{1}" />
              <update_offer cue="Start" name="$MissionName"/>
            </do_if>
          </patch>
          <cues>
            <cue name="Offer">
              <cues>
                <cue name="ConversationStarted" instantiate="true">
                  <conditions>
                    <event_conversation_started actor="$Guide" conversation="mission" convparam="Start" />
                  </conditions>
                  <actions>
                    <remove_help all="true" />
                    <open_conversation_menu menu="MissionBriefingMenu" param="[0, 0, Start, true]" />
                  </actions>
                  <cues>
                    <cue name="ConversationNextSection" instantiate="true">
                      <conditions>
                        <event_conversation_next_section actor="$Guide" choiceparam="Start" />
                      </conditions>
                      <actions>
                        <!-- Accept case -->
                        <do_if value="event.param == 'c_mission_accept'">
                          <signal_cue cue="Tutorial" />
                        </do_if>
                      </actions>
                    </cue>

                    <cue name="ConversationFinished">
                      <conditions>
                        <event_conversation_finished actor="$Guide" />
                      </conditions>
                      <actions>
                        <cancel_cue cue="ConversationStarted" />
                      </actions>
                    </cue>

                    <cue name="AcceptMission">
                      <conditions>
                        <event_object_signalled object="$Guide" param="'accept'" />
                      </conditions>
                      <actions>
                        <signal_cue cue="Tutorial" />
                      </actions>
                    </cue>
                  </cues>
                </cue>
              </cues>
            </cue>

            <cue name="Tutorial">
              <conditions>
                <check_any>
                  <event_cue_signalled />
                  <event_object_signalled object="player.entity" param="'start'" param2="Start" />
                </check_any>
              </conditions>
              <actions>
                <debug_text text="'Tutorial can begin'" chance="$DebugChance" />
                <cancel_cue cue="Offer" />
                <signal_cue_instantly cue="md.Tutorials.NewTutorialTriggered" param="Start" />
                <set_value name="$TutorialStartTime" exact="player.age" />
                <create_mission cue="Start" offercue="Start" />
                <cancel_conversation actor="$Guide" />
                <remove_offer cue="Start" />
                <remove_help all="true" />
                <set_value name="$StartDelay" exact="2s"/>
                <remove_help all="true"/>

                <find_ship_by_true_owner name="$PlayerShipsNear" faction="faction.player" space="player.galaxy" multiple="true">
                  <match_content controlpost="controlpost.aipilot"/>
                </find_ship_by_true_owner>

                <do_if value="($PlayerShipsNear.count == 0) and player.ship">
                  <show_help line="6001" log="true" duration="7s" position="1" force="true" comment="For this tutorial you need..."/>
                  <show_notification text="{1015,407}" sound="notification_warning" />
                  <remove_mission cue="Start" type="aborted" />
                  <signal_cue cue="Cleanup" />
                </do_if>
                <do_else>
                  <remove_help all="true"/>
                  <show_help line="1001" duration="7s" position="1" force="true" width="140" comment="You can abort this tutorial in the Active Missions menu " />
                </do_else>


              </actions>
              <cues>

                <cue name="Abort">
                  <conditions>
                    <event_mission_aborted cue="Start" />
                  </conditions>
                  <actions>
                    <remove_help all="true"/>
                    <remove_mission cue="Start" type="aborted" />
                    <signal_cue cue="Cleanup" />
                  </actions>
                </cue>

                <cue name="Abort_OtherTutorialStarted">
                  <conditions>
                    <event_cue_signalled cue="md.Tutorials.NewTutorialTriggered" />
                    <check_value value="event.param != Start" />
                  </conditions>
                  <actions>
                    <remove_help all="true"/>
                    <show_notification text="{1015,400}" sound="notification_warning" comment="Tutorial aborted" />
                    <remove_mission cue="Start" type="aborted"/>
                    <signal_cue cue="Cleanup" />
                  </actions>
                </cue>

                <cue name="Tutorial_Init">
                  <delay exact="$StartDelay"/>
                  <actions>
                    <!--Create a list of tutorial cues to trigger in what order, and what briefing step they point to-->
                    <!-- 
                    -->
                    <set_value name="$SignalList" exact="[
                                [Tutorial_Trading, 1],
                                [Tutorial_Tradeoffer, 1],
                                [Tutorial_Filters, 3],
                    ]"/>

                    <set_value name="$Index" exact="0"/>
                    <signal_cue cue="Tutorial_TriggerNext"/>

                  </actions>
                </cue>

                <cue name="Tutorial_TriggerNext" instantiate="true">
                  <conditions>
                    <event_cue_signalled/>
                  </conditions>
                  <actions>
                    <set_value name="$Index" operation="add"/>
                    <do_if value="$Index gt $SignalList.count">
                      <remove_help all="true"/>
                      <debug_text text="'Trading tutorial has been completed'" chance="$DebugChance" />
                      <show_help line="1002" position="1" force="true" comment="Tutorial Completed!"/>
                      <show_help line="1003" position="1" force="true" comment="Press $INPUT_ACTION_HELP$ to try other tutorials."/>
                      <remove_mission cue="Start" type="tutorialcompleted" />
                      <signal_cue cue="Cleanup" />
                    </do_if>
                    <do_else>
                      <signal_cue cue="$SignalList.{$Index}.{1}"/>
                      <set_value name="$CurrentStep" exact="$SignalList.{$Index}.{2}"/>
                      <set_objective_from_briefing cue="Start" step="$CurrentStep"/>
                    </do_else>
                  </actions>
                </cue>

                <cue name="Tutorial_Trading">
                  <conditions>
                    <event_cue_signalled/>
                  </conditions>
                  <actions>
                    <set_value name="$MenuWasOpen" exact="false"/>
                    <set_value name="$FiltersWasOpen" exact="false"/>
                    <set_value name="$TradeTabWasOpen" exact="false"/>
                    <set_value name="$FilterToggled" exact="false"/>
                    <set_value name="$TradeTabWasClosed" exact="false"/>
                    <set_value name="$WareSelected" exact="false"/>
                    <set_value name="$FilterRemoved" exact="false"/>
                    <show_help_multi position="1" force="true" allowclose="false" width="200">
                      <text line="992" log="false" comment="These yellow-framed boxes are hints. Click the arrow after you have read them to proceed to the next one."/>
                    </show_help_multi>
                    <show_help line="if player.input.controller then 5004 else 5001" log="true" position="1" force="true" comment="Press $INPUT_ACTION_OPEN_MAP$ to open the MAP menu" allowclose="false" timeout="false"/>
                  </actions>
                  <cues>

                    <cue name="Tutorial_Trading_MenuOpen">
                      <conditions>
                        <event_ui_triggered screen="'MapMenu'" control="''"/>
                      </conditions>
                      <actions>
                        <remove_help all="true" />
                        <set_value name="$MenuWasOpen" exact="true"/>
                      </actions>
                      <delay exact="0.5s"/>
                      <actions>
                        <show_help_overlay id="'mapst_filter'" highlightonly="true"/>
                        <show_help line="9001" position="1" force="true" comment="Open the filter settings on the right side of the map" allowclose="false" timeout="false"/>
                      </actions>
                      <cues>

                        <cue name="Tutorial_Trading_FiltersOpen">
                          <conditions>
                            <event_ui_triggered screen="'MapMenu'" control="'filter'"/>
                            <check_value value="event.param3 != 'off'"/>
                          </conditions>
                          <actions>
                            <remove_help_overlay id="'mapst_filter'"/>
                            <remove_help all="true" />
                            <set_value name="$FiltersWasOpen" exact="true"/>
                            <set_value name="$CurrentFilterTab" exact="event.param3"/>
                          </actions>
                          <delay exact="0.5s"/>
                          <actions>
                            <show_help_overlay id="'layer_trade'" highlightonly="true"/>
                            <show_help line="9002" position="1" force="true" comment="Open the TRADE category in the filter tab" allowclose="false" timeout="false"/>
                          </actions>
                          <cues>

                            <cue name="Tutorial_Trading_TradeTabOpen1">
                              <conditions>
                                <event_ui_triggered screen="'MapMenu'" control="'layer_trade'" comment="selected trade-tab"/>
                                <check_value value="$CurrentFilterTab != 'layer_trade'"/>
                              </conditions>
                              <actions>
                                <signal_cue cue="Tutorial_Trading_TradeTabOpenWait"/>
                              </actions>
                            </cue>

                            <cue name="Tutorial_Trading_TradeTabOpen2" onfail="cancel">
                              <conditions>
                                <check_value value="$CurrentFilterTab == 'layer_trade'" comment="trade-tab already selected on opening filters?"/>
                              </conditions>
                              <actions>
                                <show_help line="9003" position="1" force="true" comment="The TRADE category is already selected"/>
                              </actions>
                              <delay exact="3s"/>
                              <actions>
                                <signal_cue cue="Tutorial_Trading_TradeTabOpenWait"/>
                              </actions>
                            </cue>

                            <cue name="Tutorial_Trading_TradeTabOpenWait">
                              <conditions>
                                <event_cue_signalled/>
                              </conditions>
                              <delay exact="1s"/>
                              <actions>
                                <remove_help all="true"/>
                                <remove_help_overlay id="'layer_trade'"/>
                              </actions>
                              <delay exact="0.5s"/>
                              <actions>
                                <show_help_overlay id="'toggle_trade_filter'" highlightonly="true"/>
                                <set_value name="$TradeTabWasOpen" exact="true"/>
                                <show_help line="9010" position="1" force="true" comment="Click on the 'on/off' symbol to toggle TRADE OFFERS" allowclose="false" timeout="false"/>
                              </actions>
                              <cues>

                                <cue name="Tutorial_Trading_FilterToggle">
                                  <conditions>
                                    <event_ui_triggered screen="'MapMenu'" control="'layer_trade_toggle'"/>
                                  </conditions>
                                  <actions>
                                    <remove_help all="true" />
                                    <remove_help_overlay id="'toggle_trade_filter'"/>
                                    <set_value name="$FilterToggled" exact="true"/>
                                  </actions>
                                  <delay exact="0.5s"/>
                                  <actions>
                                    <show_help line="9020" position="1" force="true" comment="When trade offers are ON, click on filter icon to close the side menu" allowclose="false" timeout="false"/>
                                  </actions>
                                  <cues>

                                    <cue name="Tutorial_Trading_TradeTabClosed">
                                      <conditions>
                                        <event_ui_triggered screen="'MapMenu'" control="'filter'"/>
                                        <check_value value="event.param3 == 'off'"/>
                                      </conditions>
                                      <actions>
                                        <set_value name="$TradeTabWasClosed" exact="true"/>
                                        <remove_help all="true" />
                                      </actions>
                                      <delay exact="0.5s"/>
                                      <actions>
                                        <show_help_multi position="1" force="true" allowclose="false" width="200">
                                          <!--text line="9021" comment="You can also close the LEFT side menu"/-->
                                          <text line="9030" comment="Zoom in on the map until trade boxes show station names"/>
                                          <text line="9031" comment="On this level each box shows offers for only one station"/>
                                          <text line="9034" comment="Most stations are factories. Their products are seen under 'SOLD WARES' in yellow"/>
                                        </show_help_multi>
                                        <show_help line="9040" position="1" force="true" comment="Click on one WARE" allowclose="false" timeout="false"/>
                                      </actions>
                                      <cues>
                                        <cue name="Tutorial_Trading_ZoomHints">
                                          <actions>
                                          </actions>
                                          <cues>

                                            <cue name="Tutorial_Trading_WareSelected" version="2">
                                              <conditions>
                                                <event_ui_triggered screen="'MapMenu'" control="'filterwareselected'"/>
                                              </conditions>
                                              <actions>
                                                <set_value name="$WareSelected" exact="true"/>
                                                <remove_help all="true" />
                                                <show_help_multi position="1" force="true" allowclose="false" width="200">
                                                  <text line="9100" comment="This ware is now an active filter"/>
                                                  <text line="9103" comment="Filtered items are shown in the top right corner. All other wares are greyed out"/>
                                                </show_help_multi>
                                                <show_help line="9110" position="1" force="true" comment="Reset the filter by clicking on the item in the top right corner" allowclose="false" timeout="false"/>
                                              </actions>
                                              <patch sinceversion="2">
                                                <set_value name="$WareSelected" exact="true"/>
                                              </patch>
                                              <cues>
                                                <cue name="Tutorial_Trading_FilterOverlay">
                                                  <conditions>
                                                    <event_ui_triggered screen="'hintclosed'" control="'9100'"/>
                                                  </conditions>
                                                  <delay exact="0.3s"/>
                                                  <actions>
                                                    <do_all exact="8" counter="$i">
                                                      <show_help_overlay id="'FilterWare' + $i" highlightonly="true"/>
                                                    </do_all>
                                                  </actions>
                                                </cue>

                                                <cue name="Tutorial_Trading_FilterRemoved">
                                                  <conditions>
                                                    <event_ui_triggered screen="'MapMenu'" control="'removefilteroption'"/>
                                                  </conditions>
                                                  <actions>
                                                    <do_all exact="8" counter="$i">
                                                      <remove_help_overlay id="'FilterWare' + $i"/>
                                                    </do_all>
                                                    <set_value name="$FilterRemoved" exact="true"/>
                                                    <remove_help all="true" />
                                                    <signal_cue cue="Tutorial_TriggerNext"/>
                                                    <cancel_cue cue="Tutorial_Trading"/>
                                                  </actions>
                                                </cue>
                                              </cues>
                                            </cue>
                                          </cues>
                                        </cue>
                                      </cues>
                                    </cue>
                                  </cues>
                                </cue>
                              </cues>
                            </cue>
                          </cues>
                        </cue>
                      </cues>
                    </cue>
                  </cues>
                </cue>

                <cue name="Tutorial_Filters">
                  <conditions>
                    <event_cue_signalled/>
                  </conditions>
                  <actions>
                    <set_value name="$FilterEnter" exact="false"/>
                    <show_help_overlay id="'map_searchbar'" highlightonly="true"/>
                    <show_help line="9500" position="1" force="true" comment="Type a station or ship name into the filter text field" allowclose="false" timeout="false"/>
                  </actions>
                  <cues>

                    <cue name="Tutorial_Filters_Enter">
                      <conditions>
                        <event_ui_triggered screen="'MapMenu'" control="'searchconfirmed'"/>
                      </conditions>
                      <actions>
                        <remove_help_overlay id="'map_searchbar'"/>
                        <set_value name="$FilterEnter" exact="true"/>
                        <remove_help all="true" />
                      </actions>
                      <delay exact="0.5s"/>
                      <actions>
                        <show_help_multi position="1" force="true" allowclose="false" width="200">
                          <text line="9510" comment="Like the WARE FILTERS before, these text filters also are shown as buttons"/>
                          <text line="9520" comment="You can also search for SHIP IDs"/>
                          <text line="9530" comment="Filters remain after closing and reopening the map"/>
                        </show_help_multi>
                      </actions>
                      <cues>
                        <cue name ="Tutorial_Filters_DoneDelayed">
                          <conditions>
                            <event_ui_triggered screen="'hintclosed'" control="'9510'"/>
                          </conditions>
                          <actions>
                            <signal_cue cue="Tutorial_TriggerNext"/>
                            <cancel_cue cue="Tutorial_Filters"/>
                          </actions>
                        </cue>
                      </cues>
                    </cue>
                  </cues>
                </cue>

                <cue name="Tutorial_Tradeoffer">
                  <conditions>
                    <event_cue_signalled/>
                  </conditions>
                  <actions>
                    <set_value name="$WareSelected" exact="true"/>
                    <set_value name="$StationSelected" exact="false"/>
                    <set_value name="$StationDeselected" exact="false"/>
                    <set_value name="$ZoomedOut" exact="false"/>
                    <set_value name="$SellOfferSelected" exact="false"/>
                    <set_value name="$SelectedShip" exact="false"/>
                    <set_value name="$InfoWasOpen" exact="false"/>
                    <set_value name="$BehaviourWasOpen" exact="false"/>
                    <show_help line="9120" position="1" force="true" comment="Click on one station to SELECT it" allowclose="false" timeout="false"/>
                  </actions>
                  <cues>

                    <cue name="Tutorial_Tradeoffer_StationSelected">
                      <conditions>
                        <event_ui_triggered screen="'MapMenu'" control="'selection_station'"/>
                      </conditions>
                      <actions>
                        <set_value name="$StationSelected" exact="true"/>
                        <remove_help all="true" />
                      </actions>
                      <delay exact="0.5s"/>
                      <actions>
                        <show_help_multi position="1" force="true" allowclose="false" width="200">
                          <text line="9130" comment="The box for the selected station shows ALL trade offers"/>
                          <text line="9131" comment="Normal boxes only show the best BUY and SELL offers"/>
                          <text line="9200" comment="Slowly zoom out on the map but keep the selection active"/>
                          <text line="9210" comment="Offers are now in increasingly larger GROUPS"/>
                          <text line="9211" comment="The selected station has priority and is still shown complete"/>
                        </show_help_multi>
                        <show_help line="9220" position="1" force="true" comment="Remove the SELECTION by clicking into empty space inside a system" allowclose="false" timeout="false"/>
                      </actions>
                      <cues>

                        <cue name="Tutorial_Tradeoffer_ZoomOut">
                          <conditions>
                            <event_ui_triggered screen="'MapMenu'" control="'selection_reset'"/>
                          </conditions>
                          <actions>
                            <set_value name="$StationDeselected" exact="true"/>
                            <remove_help all="true" />
                          </actions>
                          <delay exact="0.5s"/>
                          <actions>
                            <show_help_multi position="1" force="true" allowclose="false" width="200">
                              <text line="9230" comment="Zoom out to the maximum zoom level"/>
                              <text line="9231" comment="Now ALL your known offers are grouped in one box"/>
                              <text line="9232" comment="The box will always show top BUY and SELL offers"/>
                              <text line="9233" comment="How many are listed can be changed in the TRADE FILTER"/>
                            </show_help_multi>
                            <do_if value="player.input.controller">
                              <show_help line="9301" position="1" force="true" comment="Press $INPUT_STATE_CONTROLLERMOUSEBUTTON_RIGHT$ over a ware to buy from the SELL OFFERS." allowclose="false" timeout="false"/>
                            </do_if>
                            <do_else>
                              <show_help line="9300" position="1" force="true" comment="RIGHT CLICK on a ware to buy from the SELL OFFERS" allowclose="false" timeout="false"/>
                            </do_else>
                          </actions>
                          <cues>

                            <cue name="Tutorial_Tradeoffer_BuyOfferSelected" comment="wrong, try again">
                              <conditions>
                                <event_ui_triggered screen="'MapMenu'" control="'pickedtradeoffer'"/>
                                <check_value value="event.param3 == 'buyoffer'"/>
                              </conditions>
                              <actions>
                                <remove_help all="true" />
                                <show_help line="9310" position="1" force="true" comment="This is a BUY OFFER. Close the menu and click on wares SOLD by stations!" allowclose="false" timeout="false"/>
                                <reset_cue cue="Tutorial_Tradeoffer_SellOfferSelected"/>
                              </actions>
                            </cue>

                            <cue name="Tutorial_Tradeoffer_SellOfferSelected"  version="2">
                              <conditions>
                                <event_ui_triggered screen="'MapMenu'" control="'pickedtradeoffer'"/>
                                <check_value value="event.param3 != 'buyoffer'"/>
                                <!--check_value value="event.param3 == 'selloffer'"/-->
                              </conditions>
                              <actions>
                                <set_value name="$AfterHint" exact="false"/>
                                <set_value name="$SellOfferSelected" exact="true"/>
                                <remove_help all="true" />
                                <show_help_multi position="3" force="true" allowclose="false" width="200">
                                  <text line="9320" comment="This menu allows you to create a BUY ORDER for any of your ships"/>
                                  <text line="9332" comment="Select one of your TRADE SHIPS from the top left of the trade menu."/>
                                </show_help_multi>
                              </actions>
                              <patch sinceversion="2">
                                <set_value name="$AfterHint" exact="false"/>
                              </patch>
                              <cues>
                                <cue name="Tutorial_TradeOffer_SelectShip">
                                  <conditions>
                                    <event_ui_triggered screen="'hintclosed'" control="'9320'"/>
                                  </conditions>
                                  <delay exact="0.5s"/>
                                  <actions>
                                    <show_help_overlay id="'trade_context_shipOptions'" highlightonly="true"/>
                                  </actions>
                                  <delay exact="5s"/>
                                  <actions>
                                    <set_value name="$AfterHint" exact="true"/>
                                    <remove_help_overlay id="'trade_context_shipOptions'"/>
                                    <show_help line="9331" position="3" force="true" duration="7s" comment="Select an amount you want to buy by dragging the bar for that ware"/>
                                  </actions>
                                  <delay exact="7s"/>
                                  <actions>
                                    <show_help_overlay id="'map_confirmtrade'" highlightonly="true"/>
                                    <show_help line="9340" position="3" force="true" comment="Confirm one BUY ORDER" allowclose="false" timeout="false"/>
                                  </actions>
                                </cue>

                                <cue name="Tutorial_Tradeoffer_ConfirmedBuy">
                                  <conditions>
                                    <event_ui_triggered screen="'MapMenu'" control="'confirmtrade'"/>
                                  </conditions>
                                  <actions>
                                    <remove_help all="true"/>
                                    <remove_help_overlay id="'map_confirmtrade'"/>
                                    <set_value name="$SellOfferConfirmed" exact="true"/>
                                  </actions>
                                  <delay exact="0.5s"/>
                                  <actions>
                                    <show_help_overlay id="'map_sidebar_propertyowned'" highlightonly="true"/>
                                    <show_help line="9350" position="1" force="true" comment="Select the ship you gave the order to from your PROPERTY OWNED list" allowclose="false" timeout="false"/>
                                  </actions>
                                  <cues>

                                    <cue name="TutorialTradeOffer_SelectedShip">
                                      <conditions>
                                        <event_ui_triggered screen="'MapMenu'" control="'propertyowned'"/>
                                      </conditions>
                                      <actions>
                                        <remove_help_overlay id="'map_sidebar_propertyowned'"/>
                                      </actions>
                                      <cues>

                                        <cue name="TutorialTradeOffer_SelectedShip_Check">
                                          <conditions>
                                            <event_ui_triggered screen="'MapMenu'" control="'selection_ship'"/>
                                            <check_value value="component.{event.param3}.owner == faction.player"/>
                                          </conditions>
                                          <actions>
                                            <remove_help all="true"/>
                                            <set_value name="$SelectedShip" exact="true"/>
                                            <show_help_overlay id="'map_sidebar_information'" highlightonly="true"/>
                                            <show_help line="9401" position="1" force="true" comment="Open the INFO menu." allowclose="false" timeout="false"/>
                                            <!--show_help line="9351" position="1" force="true" comment="Double click the ship to see it on the map"/-->
                                          </actions>
                                          <cues>

                                            <cue name="Tutorial_OrderQueue_InfoOpen_v2">
                                              <conditions>
                                                <event_ui_triggered screen="'MapMenu'" control="'info'"/>
                                              </conditions>
                                              <actions>
                                                <remove_help_overlay id="'map_sidebar_information'"/>
                                                <set_value name="$InfoWasOpen" exact="true"/>
                                                <remove_help all="true" />
                                                <show_help_overlay id="'mapst_ao_orderqueue'" highlightonly="true"/>
                                                <show_help line="9402" position="1" force="true" comment="Select the BEHAVIOUR TAB." allowclose="false" timeout="false"/>
                                              </actions>
                                              <cues>

                                                <cue name="Tutorial_OrderQueue_BehaviourOpen_v2">
                                                  <conditions>
                                                    <event_ui_triggered screen="'MapMenu'" control="'orderqueue'"/>
                                                  </conditions>
                                                  <actions>
                                                    <remove_help_overlay id="'mapst_ao_orderqueue'"/>
                                                    <remove_help all="true" />
                                                    <set_value name="$BehaviourWasOpen" exact="true"/>
                                                    <show_help_overlay id="'map_orderqueue'" highlightonly="true"/>
                                                    <show_help_multi position="1" force="true" allowclose="false" width="200">
                                                      <text line="9422" comment="New TRADE ORDERS are added to the ORDER QUEUE. You can delete the trade order here"/>
                                                      <text line="9430" comment="Most trade offers you see have an expiration time, during which can create trade orders"/>
                                                      <!--text line="9431" position="1" force="true" comment="During that time you can create trade orders"/-->
                                                      <text line="9442" comment="After that time you can still send ships to buy or sell wares, but you can not confirm the deal before the ship arrives because you do not know the current prices"/>
                                                      <text line="9461" comment="You see LIVE trade offers for stations any of your ships recently visited. Place SATELLITES to keep permanent updates"/>
                                                    </show_help_multi>
                                                  </actions>
                                                  <cues>
                                                    <cue name="Tutorial_OrderQueue_DoneDelayed_v2">
                                                      <conditions>
                                                        <event_ui_triggered screen="'hintclosed'" control="'9422'"/>
                                                      </conditions>
                                                      <actions>
                                                        <remove_help_overlay id="'map_orderqueue'"/>
                                                        <signal_cue cue="Tutorial_TriggerNext"/>
                                                        <cancel_cue cue="Tutorial_Tradeoffer"/>
                                                      </actions>
                                                    </cue>
                                                  </cues>
                                                </cue>
                                              </cues>
                                            </cue>

                                          </cues>


                                        </cue>

                                      </cues>
                                    </cue>

                                  </cues>
                                </cue>
                              </cues>
                            </cue>
                          </cues>
                        </cue>
                      </cues>
                    </cue>
                  </cues>
                </cue>
              </cues>
            </cue>


            <cue name="Cleanup">
              <conditions>
                <event_cue_signalled/>
              </conditions>
              <actions>
                <remove_help_overlay all="true"/>
                <debug_text text="'cleanup'" chance="$DebugChance"/>
                <do_if value="$BriefingCutsceneStarted?">
                  <stop_cutscene key="$CutsceneKey"/>
                </do_if>
                <do_if value="$Beacons?">
                  <destroy_group group="$Beacons"/>
                </do_if>
                <remove_offer cue="Start"/>
                <remove_mission cue="Start" />
                <reset_cue cue="Trigger"/>
              </actions>
            </cue>
          </cues>
        </cue>

      </cues>
    </cue>

  </cues>
</mdscript>